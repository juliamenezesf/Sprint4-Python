Sprint 4 ‚Äî CRUD Python + Oracle + API Flask 

Integrantes:
J√∫lia Menezes - RM565568
Pedro Costa - RM559932

Este projeto entrega um CRUD completo integrado ao Oracle, exposto por API Flask, consumido pelo front React (Vite + TS) e com console (menus/submenus) + exporta√ß√£o JSON + API p√∫blica.

‚úÖ Requisitos cobertos

[10 pts] Menus/submenus CRUD: python -m app.console_faq

[30 pts] CRUD + export JSON: inserir, listar, atualizar, remover + faqs_export.json

[20 pts] API p√∫blica: ‚ÄúConselho do dia‚Äù (Advice Slip) salvo como FAQ


üîß Pr√©-requisitos

Python 3.11 (recomendado no Windows para instalar oracledb sem compilar)

Node 18+ (front)

Acesso a um Oracle (SQL Developer/Instant Client)

üóÑÔ∏è Banco de Dados (Oracle)

Execute no seu schema:

-- sql/01_create_faqs.sql
CREATE TABLE FAQS (
  ID        NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  PERGUNTA  VARCHAR2(500)  NOT NULL,
  RESPOSTA  VARCHAR2(2000) NOT NULL
);

-- (opcional) sql/02_seed_faqs.sql
INSERT INTO FAQS (PERGUNTA, RESPOSTA)
VALUES ('Como marcar consulta?', 'Acesse "Como Acessar" e siga o passo a passo do Portal do Paciente.');
INSERT INTO FAQS (PERGUNTA, RESPOSTA)
VALUES ('Preciso de cadastro?', 'Sim. Cadastre uma senha com CPF do paciente e um contato v√°lido.');
COMMIT;


Se n√£o suportar IDENTITY, adapte com SEQUENCE + TRIGGER.

üß† Back-end (Flask + SQLAlchemy)
1) Ambiente
python -m venv .venv
# PowerShell:
Set-ExecutionPolicy -Scope Process -ExecutionPolicy Bypass
.\.venv\Scripts\Activate.ps1

python -m pip install --upgrade pip
pip install -r requirements.txt

2) Configura√ß√£o

Crie .env (ou defina no terminal):

DATABASE_URL=oracle+oracledb://SEU_USUARIO:SUA_SENHA@HOST:1521/ORCL
# ou com service name:
# DATABASE_URL=oracle+oracledb://SEU_USUARIO:SUA_SENHA@HOST:1521/?service_name=NOME


Senhas com @ # / : etc. precisam de URL-encode (@‚Üí%40, #‚Üí%23‚Ä¶).

3) Rodar a API
python -m app.faq_api
# http://127.0.0.1:5000/api/faqs

4) Endpoints

GET /api/faqs?q= ‚Üí lista (filtro opcional)

POST /api/faqs ‚Üí { pergunta, resposta }

PUT /api/faqs ‚Üí { id, pergunta?, resposta? }

DELETE /api/faqs/:id

üñ•Ô∏è Console (menus/submenus + export JSON + API p√∫blica)
python -m app.console_faq


Menu:

1 Inserir ¬∑ 2 Listar/Buscar ¬∑ 3 Atualizar

4 Remover ¬∑ 5 Exportar JSON ¬∑ 6 Importar ‚ÄúConselho do dia‚Äù (API p√∫blica)

O export gera faqs_export.json na raiz.


üß™ Testes r√°pidos (PowerShell)
# criar
Invoke-RestMethod -Uri "http://127.0.0.1:5000/api/faqs" -Method POST `
  -ContentType "application/json; charset=utf-8" `
  -Body (@{pergunta="App √© gratuito?"; resposta="Sim, vers√£o b√°sica."} | ConvertTo-Json -Compress)

# listar
Invoke-RestMethod "http://127.0.0.1:5000/api/faqs"

# excluir (ajuste id)
Invoke-RestMethod -Uri "http://127.0.0.1:5000/api/faqs/1" -Method DELETE

üõ†Ô∏è Solu√ß√£o de problemas

oracledb falhando no Windows: use Python 3.11 (tem wheel pronto).

CORS no front: verifique CORS(app, origins=["http://localhost:5173","http://127.0.0.1:5173"]).

Not Found em /: a API s√≥ responde em /api/faqs (raiz n√£o tem rota).

before_first_request: removido no Flask 3 ‚Äî usamos db.init_db() no carregamento.
